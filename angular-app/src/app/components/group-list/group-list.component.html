<div class="group-list-container">
  
  <!-- Header -->
  <div class="group-list-header">
    <h2>
      <i class="fas fa-users"></i>
      Your Groups
    </h2>
    <button class="create-btn" (click)="createGroup()">
      <i class="fas fa-plus"></i>
      New Group
    </button>
  </div>
  
  <!-- Search Bar -->
  @if (groups && groups.length > 5) {
    <div class="search-container">
      <input 
        type="text" 
        class="search-input" 
        placeholder="Search groups..."
        [(ngModel)]="searchTerm"
        (input)="filterGroups()">
      @if (searchTerm) {
        <button class="clear-btn" (click)="clearSearch()">
          <i class="fas fa-times"></i>
        </button>
      }
    </div>
  }
  
  <!-- Loading State -->
  @if (groups === undefined) {
    <div class="loading-state">
      <div class="spinner"></div>
      <p>Loading groups...</p>
    </div>
  }
  
  <!-- Empty State -->
  @if (groups && filteredGroups.length === 0) {
    <div class="empty-state">
      <div class="empty-icon">
        <i class="fas fa-users-slash"></i>
      </div>
      <h3>No Groups Found</h3>
      <p>You haven't joined any groups yet.</p>
      <button class="primary-btn" (click)="createGroup()">
        <i class="fas fa-plus-circle"></i>
        Create Your First Group
      </button>
    </div>
  }
  
  <!-- Groups List -->
  @if (filteredGroups && filteredGroups.length > 0) {
    @for (group of filteredGroups; track group) {
      <div class="group-item" 
           [class.selected]="selectedGroup?.id === group.id"
           (click)="selectGroup(group)">
        
        <div class="group-avatar" [class]="getGroupAvatarColor(group.name)">
          <i [class]="getGroupIcon(group)"></i>
        </div>
        
        <div class="group-info">
          <div class="group-header">
            <h4>{{ group.name }}</h4>
            @if (group.archived) {
              <div class="archived-badge">
                <i class="fas fa-archive"></i>
                Archived
              </div>
            }
          </div>
          <p class="group-description">{{ group.description || 'No description' }}</p>
          <div class="group-meta">
            <span class="meta-item">
              <i class="fas fa-users"></i>
              {{ group.memberCount || 0 }} members
            </span>
            @if (group.subject) {
              <span class="group-subject">
                <i class="fas fa-book"></i>
                {{ group.subject }}
              </span>
            }
            <span class="meta-item">
              <i class="fas fa-calendar"></i>
              {{ group.createdDate | date:'MMM dd' }}
            </span>
          </div>
        </div>
      </div>
    }
  }
</div>